<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Conversor de Comandos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
      transition: background-color 0.3s, color 0.3s;
    }
    .card {
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    textarea {
      resize: vertical;
      min-height: 150px;
    }
    .btn i {
      margin-right: 6px;
    }
    .dark-mode {
      background-color: #212529 !important;
      color: #f8f9fa !important;
    }
    .dark-mode .card {
      background-color: #2c3034;
      color: #f8f9fa;
    }
    .dark-mode textarea, .dark-mode input {
      background-color: #343a40;
      color: #f8f9fa;
      border: 1px solid #495057;
    }
  </style>
</head>
<body>

<div class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">Conversor de Comandos 2G/4G e 4G/2G</h2>
    <button class="btn btn-outline-secondary" id="toggleMode"><i class="bi bi-moon"></i> Modo Escuro</button>
  </div>

  <div class="card p-4 mb-5">
    <div class="mb-3">
      <label for="inputText" class="form-label fw-semibold">Cole os comandos aqui:</label>
      <textarea id="inputText" class="form-control" placeholder="Cole os comandos..."></textarea>
    </div>

    <div class="row g-3 mb-3">
      <div class="col-md-6">
        <label class="form-label fw-semibold">Modo de conversão:</label>
        <select id="mode" class="form-select">
          <option value="group">Agrupar (até N comandos por linha)</option>
          <option value="line">Linha a linha</option>
        </select>
      </div>
      <div class="col-md-6">
        <label class="form-label fw-semibold">Máximo de comandos por linha:</label>
        <input type="number" id="maxPerLine" class="form-control" value="4" min="1">
      </div>
    </div>

    <div class="d-flex flex-wrap gap-2 mb-3">
      <button class="btn btn-primary" onclick="convert()"><i class="bi bi-arrow-left-right"></i> Converter</button>
      <button class="btn btn-success" onclick="copyOutput()"><i class="bi bi-clipboard"></i> Copiar</button>
      <button class="btn btn-info text-white" onclick="downloadOutput()"><i class="bi bi-download"></i> Baixar</button>
      <button class="btn btn-danger" onclick="clearAll()"><i class="bi bi-x-circle"></i> Limpar</button>
    </div>

    <div class="mb-3">
      <label for="outputText" class="form-label fw-semibold">Resultado:</label>
      <textarea id="outputText" class="form-control" readonly placeholder="O resultado aparecerá aqui..."></textarea>
    </div>
  </div>

  <div class="card p-4">
    <h3 class="fw-bold mb-3">Conversor de Horas/Minutos para Segundos</h3>
    <div class="row g-3 mb-3">
      <div class="col-md-6">
        <label for="timeValue1" class="form-label fw-semibold">HB:</label>
        <div class="input-group">
          <input type="number" id="timeValue1" class="form-control" placeholder="Digite um número" min="0">
          <select id="timeUnit1" class="form-select">
            <option value="hours">Horas</option>
            <option value="minutes">Minutos</option>
          </select>
        </div>
      </div>
      <div class="col-md-6">
        <label for="timeValue2" class="form-label fw-semibold">SHB:</label>
        <div class="input-group">
          <input type="number" id="timeValue2" class="form-control" placeholder="Digite um número" min="0">
          <select id="timeUnit2" class="form-select">
            <option value="hours">Horas</option>
            <option value="minutes">Minutos</option>
          </select>
        </div>
      </div>
    </div>
    <div class="d-flex flex-wrap gap-2 mb-3">
      <button class="btn btn-primary" onclick="convertTimeToSeconds()"><i class="bi bi-arrow-down-up"></i> Converter para Segundos</button>
      <button class="btn btn-success" onclick="copyTimeOutput()"><i class="bi bi-clipboard"></i> Copiar</button>
      <button class="btn btn-danger" onclick="clearTimeFields()"><i class="bi bi-x-circle"></i> Limpar</button>
    </div>
    <div class="mb-3">
      <label for="timeOutput" class="form-label fw-semibold">Resultado em segundos:</label>
      <textarea id="timeOutput" class="form-control" readonly placeholder="O resultado aparecerá aqui..."></textarea>
    </div>
  </div>
</div>

<script>
function convert() {
  const input = document.getElementById("inputText").value.trim();
  const mode = document.getElementById("mode").value;
  const maxPerLine = parseInt(document.getElementById("maxPerLine").value) || 4;
  let lines = input.split(/\r?\n/).map(l => l.trim()).filter(l => l.length > 0);

  let output = "";
  if (mode === "line") {
    let cmds = [];
    lines.forEach(l => {
      if (l.startsWith("*")) {
        l = l.replace(/^\*\d+;/, "");
        cmds.push(...l.split(";").map(x => x.trim()).filter(x => x));
      } else {
        cmds.push(l);
      }
    });
    output = cmds.join("\n");
  } else {
    let cmds = [];
    lines.forEach(l => {
      if (l.startsWith("*")) {
        l = l.replace(/^\*\d+;/, "");
        cmds.push(...l.split(";").map(x => x.trim()).filter(x => x));
      } else {
        cmds.push(l);
      }
    });

    let grouped = [];
    let buffer = [];
    cmds.forEach(cmd => {
      if (cmd.toUpperCase() === "RESTART") {
        if (buffer.length) {
          grouped.push("*" + buffer.length + ";" + buffer.join(";"));
          buffer = [];
        }
        grouped.push("RESTART");
      } else {
        buffer.push(cmd);
        if (buffer.length >= maxPerLine) {
          grouped.push("*" + buffer.length + ";" + buffer.join(";"));
          buffer = [];
        }
      }
    });
    if (buffer.length) {
      grouped.push("*" + buffer.length + ";" + buffer.join(";"));
    }
    output = grouped.join("\n");
  }
  document.getElementById("outputText").value = output;
}

function copyOutput() {
  const output = document.getElementById("outputText");
  output.select();
  document.execCommand("copy");
  alert("Resultado copiado!");
}

function downloadOutput() {
  const text = document.getElementById("outputText").value;
  const blob = new Blob([text], { type: "text/plain" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "resultado.txt";
  link.click();
}

function clearAll() {
  document.getElementById("inputText").value = "";
  document.getElementById("outputText").value = "";
}

// Novos scripts para o conversor de tempo
function convertTimeToSeconds() {
  const value1 = parseFloat(document.getElementById("timeValue1").value) || 0;
  const unit1 = document.getElementById("timeUnit1").value;
  const value2 = parseFloat(document.getElementById("timeValue2").value) || 0;
  const unit2 = document.getElementById("timeUnit2").value;

  let seconds1 = 0;
  let seconds2 = 0;

  // Calcula segundos para o primeiro valor
  if (unit1 === "hours") {
    seconds1 = value1 * 3600;
  } else {
    seconds1 = value1 * 60;
  }

  // Calcula segundos para o segundo valor
  if (unit2 === "hours") {
    seconds2 = value2 * 3600;
  } else {
    seconds2 = value2 * 60;
  }
  
  const totalSeconds = seconds1 + seconds2;

  // Cria uma string de saída mais detalhada
  let outputString = "";
  if (value1 > 0) {
    outputString += `${value1} ${unit1 === 'hours' ? 'horas' : 'minutos'} = ${seconds1} segundos\n`;
  }
  if (value2 > 0) {
    outputString += `${value2} ${unit2 === 'hours' ? 'horas' : 'minutos'} = ${seconds2} segundos\n`;
  }
  if (outputString.length > 0) {
    outputString += `\nTotal = ${totalSeconds} segundos`;
  } else {
     outputString = `Total = ${totalSeconds} segundos`;
  }
  
  document.getElementById("timeOutput").value = outputString;
}

function copyTimeOutput() {
  const output = document.getElementById("timeOutput");
  output.select();
  document.execCommand("copy");
  alert("Resultado de tempo copiado!");
}

function clearTimeFields() {
  document.getElementById("timeValue1").value = "";
  document.getElementById("timeValue2").value = "";
  document.getElementById("timeOutput").value = "";
}

// Alternar modo escuro
const toggleBtn = document.getElementById("toggleMode");
let dark = false;

toggleBtn.addEventListener("click", () => {
  dark = !dark;
  document.body.classList.toggle("dark-mode", dark);
  toggleBtn.innerHTML = dark ? '<i class="bi bi-sun"></i> Modo Claro' : '<i class="bi bi-moon"></i> Modo Escuro';
});
</script>

</body>
</html>